//
//  PointToSegmentPenTests.swift
//  FontScriptSwiftTests
//
//  Created by David Schweinsberg on 7/11/18.
//  Copyright Â© 2018 David Schweinsberg. All rights reserved.
//

import XCTest
import FontScript

class PointToSegmentPenTests: XCTestCase {

  override func setUp() {
    super.setUp()
    // Put setup code here. This method is called before the invocation of each test method in the class.
  }

  override func tearDown() {
    // Put teardown code here. This method is called after the invocation of each test method in the class.
    super.tearDown()
  }

  func testDee() {
    let testPen = TestPen()
    let pen = PointToSegmentPen(pen: testPen)

    pen.beginPath()
    pen.addCGPoint(CGPoint(x: -100, y: 100), type: .line, smooth: false)
    pen.addCGPoint(CGPoint(x: 0, y: 100), type: .line, smooth: false)
    pen.addCGPoint(CGPoint(x: 50, y: 100), type: .offCurve, smooth: false)
    pen.addCGPoint(CGPoint(x: 100, y: 50), type: .offCurve, smooth: false)
//    pen.add(CGPoint(x: 100, y: 0), type: .curve, smooth: false)
//    pen.add(CGPoint(x: 100, y: -50), type: .offCurve, smooth: false)
//    pen.add(CGPoint(x: 50, y: -100), type: .offCurve, smooth: false)
//    pen.add(CGPoint(x: 0, y: -100), type: .curve, smooth: false)
//    pen.add(CGPoint(x: -100, y: -100), type: .line, smooth: false)
    pen.endPath()

    XCTAssertEqual(testPen.records.count, 6);
    XCTAssertEqual(testPen.records[0], "moveTo (-100.0, 100.0)")
    XCTAssertEqual(testPen.records[1], "lineTo (0.0, 100.0)")
    XCTAssertEqual(testPen.records[2], "curveTo (50.0, 100.0) (100.0, 50.0) (100.0, 0.0)")
    XCTAssertEqual(testPen.records[3], "curveTo (100.0, -50.0) (50.0, -100.0) (0.0, -100.0)")
    XCTAssertEqual(testPen.records[4], "lineTo (-100.0, -100.0)")
    XCTAssertEqual(testPen.records[5], "closePath")
  }
}
